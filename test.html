<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


    <input type="text" id="url">
    <input type="text" id="name">
    <input type="text" id="password">
    <input type="text" id="text">
    <input type="file" id="file" multiple="multiple">
    <br />
    <button type="submit" onclick="send()">submit</button>

    <div class="context"></div>





</body>
</html>
<script>
    document.getElementById('url').value = 'http://127.0.0.1:2100/cloud/updata'
</script>
<script>
    window.Ajax = function (config) {

        return new Promise((resolve, reject) => {

            if ( typeof (config) !== 'object' ){ reject('Config Is Empty') }

            let xhr = new XMLHttpRequest();

            xhr.responseType = config.responseType || 'json';
            xhr.timeout = config.timeout || 0;
            xhr.withCredentials = config.withCredentials || true;

            // function
            xhr.onreadystatechange = () => {
                xhr.status == 200 && xhr.readyState == 4 ? resolve(xhr.response) : void 0
            }
            xhr.upload.onprogress = (e) => {
                let percent = e.lengthComputable ? ( 100 * ( e.loaded / e.total ) ) . toFixed() : 'Unable to compute progress information since the total size is unknown';
                typeof ( config.uploadProgress ) != 'undefined' ? config.uploadProgress(percent) : void 0
            }
            xhr.onprogress = (e) => {
                let percent = e.lengthComputable ? ( 100 * ( e.loaded / e.total ) ) . toFixed() : 'Unable to compute progress information since the total size is unknown';
                typeof ( config.downProgress ) != 'undefined' ? config.downProgress(percent) : void 0
            }
            xhr.onerror = () => {
                reject(xhr)
            }
            xhr.ontimeout = () => {
                typeof ( config.timeout ) != 'undefined' ? config.timeout(xhr) : void 0
            }

            if ( config.method == 'GET' ){

                for ( name in config.data ){
                    config.url += '&' + name + '=' + config.data[data]
                }

            }

            xhr.open(config.method || 'POST', config.url, config.async || true);

            xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')
            if ( config.headers != null ){
                for ( head in config.headers ){
                    xhr.setRequestHeader( head, config.headers[head])
                }
            }

            xhr.send(config.data || null);

        })

    }
</script>
<script>


    window.send = () => {

        let data = new FormData()

        data.append('name',document.getElementById('name').value)
        data.append('password',document.getElementById('password').value)
        data.append('text',document.getElementById('text').value)

        let size = document.getElementById('file').files.length;

        for ( let i=0;i<size;i++ ){
            data.append('file',  document.getElementById('file').files[i]);
        }

        Ajax({
            url:document.getElementById('url').value,
            data:data
        }).then((data)=>{
            console.log(data)
            document.querySelector('.context').innerHTML = data
        })

    }


</script>